I have completed the upgrade of the project to Vue 3 + TS + Vite + Element Plus + Pinia + Mitt.

Here is a summary of the changes:

1.  **Dependencies & Config**:
    -   Updated `package.json` with new dependencies.
    -   Created `vite.config.ts`, `tsconfig.json`, `tsconfig.node.json`.
    -   Moved and updated `index.html` to root.
    -   Deleted `vue.config.js` and `babel.config.js`.

2.  **Entry Point**:
    -   Replaced `src/main.js` with `src/main.ts`.
    -   Replaced `src/router/index.js` with `src/router/index.ts` (Vue Router 4).
    -   Created `src/env.d.ts` for type definitions.

3.  **Store Migration (Vuex -> Pinia)**:
    -   Created `src/store/index.ts` containing the main store `useMainStore` which merges all previous Vuex modules.
    -   Deleted old Vuex store files.

4.  **Utils & Hooks**:
    -   Replaced `src/utils/eventBus.js` with `src/utils/eventBus.ts` (using `mitt`).
    -   Created `src/hooks/useFile.ts` to extract file handling logic.
    -   Updated `src/utils/toast.js` to `src/utils/toast.ts` (using `ElMessage`).
    -   Updated `src/utils/shortcutKey.js` to `src/utils/shortcutKey.ts` to use Pinia store.

5.  **Components Refactoring (Composition API)**:
    -   Refactored `src/views/Home.vue` to `<script setup lang="ts">`.
    -   Refactored `src/components/Toolbar.vue` to `<script setup lang="ts">`.
    -   Refactored `src/components/Editor/index.vue` to `<script setup lang="ts">`.
    -   Refactored `src/components/Editor/Shape.vue` to `<script setup lang="ts">`.
    -   Refactored `src/components/Editor/MarkLine.vue` to `<script setup lang="ts">`.
    -   Refactored `src/components/Editor/ContextMenu.vue` to `<script setup lang="ts">`.
    -   Refactored `src/components/ComponentList.vue` to `<script setup lang="ts">`.
    -   Updated `src/custom-component/index.js` to `src/custom-component/index.ts`.

6.  **Next Steps**:
    -   You may need to verify other components in `src/custom-component/` and `src/components/` (like `AnimationList`, `EventList`, `CanvasAttr`) to ensure they are compatible with the new store/eventBus if they used `mapState` or `this.$store`.
    -   Run `npm run dev` to start the development server.
